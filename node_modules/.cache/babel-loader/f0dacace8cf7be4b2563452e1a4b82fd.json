{"ast":null,"code":"var _jsxFileName = \"/home/tlancia16/libkiosk/src/pages/APUSupport.js\";\nimport React from 'react';\nimport { Button } from 'react-mdl';\nimport { Link } from 'react-router-dom';\nimport Iframe from 'react-iframe';\nimport IdleTimer from 'react-idle-timer';\nimport { IdleTimeOutModal } from '../components/IdleModal';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport './home.css'; // import { reset } from 'ansi-colors';\n// const frame = document.createElement('Iframe');\n// document.body.appendChild(frame);\n// frame.addEventListener('load', function() {\n//     frame.contentWindow.addEventListener(\"mousemove\", this.idleTimer.reset(), false);\n//     frame.contentWindow.addEventListener(\"mousedown\", this.idleTimer.reset(), false);\n// });\n\nconst APUSupportLink = \"https://static.zdassets.com/web_widget/latest/liveChat.html?v=10#key=apu.zendesk.com&settings=JTdCJTIyd2ViV2lkZ2V0JTIyJTNBJTdCJTIyY2hhdCUyMiUzQSU3QiUyMnRpdGxlJTIyJTNBbnVsbCUyQyUyMmRlcGFydG1lbnRzJTIyJTNBJTdCJTdEJTJDJTIycHJlY2hhdEZvcm0lMjIlM0ElN0IlMjJkZXBhcnRtZW50TGFiZWwlMjIlM0FudWxsJTJDJTIyZ3JlZXRpbmclMjIlM0FudWxsJTdEJTJDJTIyb2ZmbGluZUZvcm0lMjIlM0ElN0IlMjJncmVldGluZyUyMiUzQW51bGwlN0QlMkMlMjJjb25jaWVyZ2UlMjIlM0ElN0IlMjJhdmF0YXJQYXRoJTIyJTNBbnVsbCUyQyUyMm5hbWUlMjIlM0FudWxsJTJDJTIydGl0bGUlMjIlM0FudWxsJTdEJTdEJTJDJTIyY29sb3IlMjIlM0ElN0IlMjJhcnRpY2xlTGlua3MlMjIlM0ElMjIlMjIlMkMlMjJidXR0b24lMjIlM0ElMjIlMjIlMkMlMjJoZWFkZXIlMjIlM0ElMjIlMjIlMkMlMjJsYXVuY2hlciUyMiUzQSUyMiUyMiUyQyUyMmxhdW5jaGVyVGV4dCUyMiUzQSUyMiUyMiUyQyUyMnJlc3VsdExpc3RzJTIyJTNBJTIyJTIyJTJDJTIydGhlbWUlMjIlM0FudWxsJTdEJTdEJTdE&&locale=en-US&title=Web%20Widget%20Live%20Chat\"; // var parentDOM = document.getElementById('parent-id');\n// iframe.contentDocument.body.addEventListener(\"mousemove\", this.onActive);\n// iframe.contentDocument.body.addEventListener(\"keyup\", this.onActive);\n// iframe.contentDocument.body.addEventListener(\"mouseout\", this.onActive);\n\nexport class APUSupport extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getCurrentTime = () => {\n      this.setState({\n        currentTime: this.idleTimer.getRemainingTime()\n      });\n      return this.state.currentTime;\n    };\n\n    this.state = {\n      timeIdle: 5,\n      currentTime: 0,\n      showModal: false,\n      userLoggedIn: false,\n      isTimedOut: false,\n      isGettingOff: false // openDialog: false,\n\n    };\n    this.idleTimer = null;\n    this.onAction = this._onAction.bind(this);\n    this.onActive = this._onActive.bind(this);\n    this.onIdle = this._onIdle.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  componentDidMount() {// this.Iframe.contentWindow.addEventListener(\"mousedown\", console.log(\"click\"))\n    // this.Iframe.contentWindow.addEventListener(\"mousemove\", console.log(\"move\"))\n    // iframe = parentDOM.getElementById(\"apuWidget\");\n    // console.log(iframe)\n    // iframe.contentDocument.body.addEventListener(\"mousemove\", this.onActive)\n    // iframe.contentDocument.body.addEventListener(\"keyup\", this.onActive)\n  }\n\n  onMyFrameLoad() {\n    console.log(\"Iframe has been loaded\");\n    var iframe = document.getElementById(\"apuWidget\");\n    console.log(iframe);\n    iframe.contentDocument.body.addEventListener(\"mousemove\", this.onActive);\n    iframe.contentDocument.body.addEventListener(\"keyup\", this.onActive);\n    return null;\n  }\n\n  handleClose() {\n    this.setState({\n      showModal: false,\n      timeIdle: 3\n    });\n  }\n\n  handleLogout() {\n    this.setState({\n      showModal: false,\n      isGettingOff: true\n    });\n    this.props.history.push('/');\n  } // Display \n\n\n  displayModal() {\n    if (this.state.showModal) {\n      return React.createElement(IdleTimeOutModal, {\n        showModal: this.state.showModal,\n        handleClose: this.handleClose,\n        handleLogout: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      });\n    } else {\n      return null;\n    }\n  }\n\n  runTimer() {\n    return React.createElement(IdleTimer, {\n      ref: ref => {\n        this.idleTimer = ref;\n      },\n      element: document,\n      onActive: this.onActive,\n      onIdle: this.onIdle,\n      onAction: this.onAction,\n      debounce: 250,\n      timeout: 1000 * 60 * this.state.timeIdle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    });\n  } //onload={() => this.onMyFrameLoad} \n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, this.runTimer(), React.createElement(\"div\", {\n      class: \"split left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"script\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"function onMyFrameLoad() \", alert('myframe is loaded'), \";\"), React.createElement(\"iframe\", {\n      id: \"apuWidget\",\n      title: \"apuWidget\",\n      src: APUSupportLink,\n      width: \"650px\",\n      height: \"900px\",\n      style: {\n        marginTop: \"40px\"\n      },\n      onload: \"onMyFrameLoad(this)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"split right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"APU Support Chat\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"This chat connects you directly to a APU support representative that can answer any questions you may have concerning lab computers or account issues.\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"This page will refresh after 5 minutes of inactivity.\"), React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(Button, {\n      raised: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Home\")))), this.displayModal());\n  }\n\n  _onAction(e) {\n    if (!this.isGettingOff) {\n      console.log('user did something', e);\n      console.log('time remaining', this.idleTimer.getRemainingTime());\n      this.setState({\n        isTimedOut: false\n      });\n    }\n  }\n\n  _onActive(e) {\n    console.log('user is active', e);\n\n    if (!this.showModal) {\n      this.setState({\n        isTimedOut: false\n      });\n    }\n  }\n\n  _onIdle(e) {\n    console.log('user is idle', e);\n    const isTimedOut = this.state.isTimedOut;\n\n    if (isTimedOut) {\n      this.props.history.push('/');\n    } else {\n      this.setState({\n        showModal: true\n      });\n      this.setState({\n        timeIdle: 1\n      });\n      this.idleTimer.reset();\n      console.log('time remaining', this.idleTimer.getRemainingTime());\n      this.setState({\n        isTimedOut: true\n      });\n    }\n  }\n\n}\nexport default APUSupport;","map":{"version":3,"sources":["/home/tlancia16/libkiosk/src/pages/APUSupport.js"],"names":["React","Button","Link","Iframe","IdleTimer","IdleTimeOutModal","Container","Row","Col","APUSupportLink","APUSupport","Component","constructor","props","getCurrentTime","setState","currentTime","idleTimer","getRemainingTime","state","timeIdle","showModal","userLoggedIn","isTimedOut","isGettingOff","onAction","_onAction","bind","onActive","_onActive","onIdle","_onIdle","handleClose","handleLogout","componentDidMount","onMyFrameLoad","console","log","iframe","document","getElementById","contentDocument","body","addEventListener","history","push","displayModal","runTimer","ref","render","alert","marginTop","e","reset"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button } from 'react-mdl';\nimport { Link } from 'react-router-dom';\nimport Iframe from 'react-iframe';\nimport IdleTimer from 'react-idle-timer';\nimport { IdleTimeOutModal } from '../components/IdleModal'\nimport {Container, Row, Col} from 'react-bootstrap'\nimport './home.css';\n// import { reset } from 'ansi-colors';\n\n// const frame = document.createElement('Iframe');\n// document.body.appendChild(frame);\n// frame.addEventListener('load', function() {\n\n//     frame.contentWindow.addEventListener(\"mousemove\", this.idleTimer.reset(), false);\n//     frame.contentWindow.addEventListener(\"mousedown\", this.idleTimer.reset(), false);\n  \n// });\n\nconst APUSupportLink = \"https://static.zdassets.com/web_widget/latest/liveChat.html?v=10#key=apu.zendesk.com&settings=JTdCJTIyd2ViV2lkZ2V0JTIyJTNBJTdCJTIyY2hhdCUyMiUzQSU3QiUyMnRpdGxlJTIyJTNBbnVsbCUyQyUyMmRlcGFydG1lbnRzJTIyJTNBJTdCJTdEJTJDJTIycHJlY2hhdEZvcm0lMjIlM0ElN0IlMjJkZXBhcnRtZW50TGFiZWwlMjIlM0FudWxsJTJDJTIyZ3JlZXRpbmclMjIlM0FudWxsJTdEJTJDJTIyb2ZmbGluZUZvcm0lMjIlM0ElN0IlMjJncmVldGluZyUyMiUzQW51bGwlN0QlMkMlMjJjb25jaWVyZ2UlMjIlM0ElN0IlMjJhdmF0YXJQYXRoJTIyJTNBbnVsbCUyQyUyMm5hbWUlMjIlM0FudWxsJTJDJTIydGl0bGUlMjIlM0FudWxsJTdEJTdEJTJDJTIyY29sb3IlMjIlM0ElN0IlMjJhcnRpY2xlTGlua3MlMjIlM0ElMjIlMjIlMkMlMjJidXR0b24lMjIlM0ElMjIlMjIlMkMlMjJoZWFkZXIlMjIlM0ElMjIlMjIlMkMlMjJsYXVuY2hlciUyMiUzQSUyMiUyMiUyQyUyMmxhdW5jaGVyVGV4dCUyMiUzQSUyMiUyMiUyQyUyMnJlc3VsdExpc3RzJTIyJTNBJTIyJTIyJTJDJTIydGhlbWUlMjIlM0FudWxsJTdEJTdEJTdE&&locale=en-US&title=Web%20Widget%20Live%20Chat\";\n\n// var parentDOM = document.getElementById('parent-id');\n// iframe.contentDocument.body.addEventListener(\"mousemove\", this.onActive);\n// iframe.contentDocument.body.addEventListener(\"keyup\", this.onActive);\n// iframe.contentDocument.body.addEventListener(\"mouseout\", this.onActive);\n\nexport class APUSupport extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            timeIdle: 5,\n            currentTime: 0,\n            showModal: false,\n            userLoggedIn: false,\n            isTimedOut: false,\n            isGettingOff: false\n            // openDialog: false,\n        }\n        this.idleTimer = null\n        this.onAction = this._onAction.bind(this)\n        this.onActive = this._onActive.bind(this)\n        this.onIdle = this._onIdle.bind(this)\n        this.handleClose = this.handleClose.bind(this)\n        this.handleLogout = this.handleLogout.bind(this)\n    }\n\n    componentDidMount() {\n        // this.Iframe.contentWindow.addEventListener(\"mousedown\", console.log(\"click\"))\n        // this.Iframe.contentWindow.addEventListener(\"mousemove\", console.log(\"move\"))\n        // iframe = parentDOM.getElementById(\"apuWidget\");\n        // console.log(iframe)\n        // iframe.contentDocument.body.addEventListener(\"mousemove\", this.onActive)\n        // iframe.contentDocument.body.addEventListener(\"keyup\", this.onActive)\n    }\n\n    onMyFrameLoad() {\n        console.log(\"Iframe has been loaded\")\n        var iframe = document.getElementById(\"apuWidget\")\n        console.log(iframe)\n        iframe.contentDocument.body.addEventListener(\"mousemove\", this.onActive)\n        iframe.contentDocument.body.addEventListener(\"keyup\", this.onActive)\n        return null\n    }\n\n    getCurrentTime = () => {\n        this.setState({\n            currentTime: this.idleTimer.getRemainingTime()\n        });\n        return this.state.currentTime\n    }\n\n    handleClose() {\n        this.setState({showModal: false, timeIdle: 3})\n      }\n  \n    handleLogout() {\n        this.setState({showModal: false, isGettingOff: true})\n        this.props.history.push('/')\n    }\n\n    // Display \n    displayModal() {\n        if (this.state.showModal) {\n            return (\n                <IdleTimeOutModal \n                        showModal={this.state.showModal} \n                        handleClose={this.handleClose}\n                        handleLogout={this.handleLogout}\n                    />\n            )\n        } else { return null }\n    }\n\n    runTimer() {\n        return(\n            <IdleTimer\n                    ref={ref => { this.idleTimer = ref }}\n                    element={document}\n                    onActive={this.onActive}\n                    onIdle={this.onIdle}\n                    onAction={this.onAction}\n                    debounce={250}\n                    timeout={1000 * 60 * this.state.timeIdle} />\n        )\n    }\n\n    //onload={() => this.onMyFrameLoad} \n\n\n    render() {\n        return (\n            <div>\n                {this.runTimer()}\n                <div class=\"split left\">\n                    <script>\n                        function onMyFrameLoad() {\n                            alert('myframe is loaded')\n                        };\n                    </script>\n                    <iframe id=\"apuWidget\" title=\"apuWidget\" \n                        src={APUSupportLink} \n                        width=\"650px\"\n                        height=\"900px\"\n                        style={{marginTop: \"40px\"}}\n                        onload=\"onMyFrameLoad(this)\"/>\n                </div>\n                <div class=\"split right\">\n                    <div class=\"centered\">\n                    <h1>APU Support Chat</h1>\n                    <p>This chat connects you directly to a APU support representative that can answer any questions you may have concerning lab computers or account issues.</p>\n                    <p>This page will refresh after 5 minutes of inactivity.</p>\n                    <Link to=\"/\">\n                         <Button raised>Home</Button>\n                     </Link>\n                    </div>\n                </div>\n                {this.displayModal()}\n            </div>\n        )\n    }\n\n    _onAction(e) {\n        if (!this.isGettingOff){\n            console.log('user did something', e)\n            console.log('time remaining', this.idleTimer.getRemainingTime())\n\n            this.setState({isTimedOut: false})\n        }\n    }\n     \n    _onActive(e) {\n        console.log('user is active', e)\n        if (!this.showModal){\n            this.setState({isTimedOut: false})\n        }\n    }\n     \n    _onIdle(e) {\n        console.log('user is idle', e)\n        const isTimedOut = this.state.isTimedOut\n        if (isTimedOut) {\n            this.props.history.push('/')\n        } else {\n          this.setState({showModal: true})\n          this.setState({ timeIdle: 1 })\n          this.idleTimer.reset();\n          console.log('time remaining', this.idleTimer.getRemainingTime())\n          this.setState({isTimedOut: true})\n        }\n    }\n}\n\nexport default APUSupport;"]},"metadata":{},"sourceType":"module"}